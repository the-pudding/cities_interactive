!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}({0:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},13:function(t,e,n){"use strict";n.r(e);var o=n(2),i=n.n(o),r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}},a=r;function c(t){var e,n,o,i=0,r=[{text:"First letâ€™s look at America, with its two megacities (over 10M people): NYC and LA.",location:{center:[-92.541666,29.895985],zoom:4,bearing:-1.55,pitch:60,speed:.2,easing:function(t){return t}},button:"Fly to wide-shot of US"},{text:"We know China has a big population, but seeing the scale of megacities helps",location:{center:[120.887528,29.17437],zoom:4,bearing:-41.58,pitch:57,speed:.2,easing:function(t){return t}},button:"fly to china"},{text:"We know China has a big population, but seeing the scale of megacities helps",location:{center:[113.892168,22.922493],zoom:7.82,bearing:24,pitch:58,speed:.8,easing:function(t){return t}},button:"fly to china"},{text:"africa has",location:{center:[113.892168,22.922493],zoom:7.82,bearing:24,pitch:58,speed:.8,easing:function(t){return t}},button:"fly to china"}],a=d3.select(".tour-container"),c=!0,u=d3.select(".start-screen"),s=u.select(".start-button"),l="full-layer copy",f=!1,d=d3.select(".before-map-container"),p="present",g=d3.select(".delta-map-container"),b=d3.select("#compare-map"),m=!1;function y(t){"delta-button"!=t&&"delta"==p&&f&&e.jumpTo({center:o.getCenter(),zoom:o.getZoom(),pitch:o.getPitch(),bearing:o.getBearing()}),"compare-button"==t?(e.resize(),d.classed("extended",!0),d.transition().duration(400).style("width","50%").on("end",function(t){p="compare",m?n.jumpTo({center:e.getCenter(),zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing()}):(n=new mapboxgl.Map({container:"compare-map",style:"mapbox://styles/dock4242/cjngbd5r047lc2rqjsj0ajwt0?optimize=true",center:e.getCenter(),zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing()})).on("load",function(t){new mapboxgl.Compare(e,n,{}),b.style("pointer-events","all")}),e.resize()})):"compare"==p&&(d.classed("extended",!1),d.transition().duration(400).style("width","0%").on("end",function(t){e.resize()})),"delta-button"==t?(p="delta",f?o.jumpTo({center:e.getCenter(),zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing()}):(f=!0,o=new mapboxgl.Map({container:"delta-map",style:"mapbox://styles/dock4242/cjnfclc780ham2rufqmsufejy?optimize=true",center:e.getCenter(),zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing()})),g.transition().duration(500).style("transform","translate(0px,0px)")):g.transition().duration(500).style("transform","translate(100%,0px)").on("end",function(t){}),"present-button"==t?(p="present",e.setLayoutProperty(l,"visibility","visible")):"compare-button"!=t&&e.setLayoutProperty(l,"visibility","none")}function h(){a.select(".tour-text").text(r[i].text),a.select(".tour-button").text(r[i].button).on("click",function(t){!function(t){e.flyTo(t.location),i+=1,a.select(".tour-text").text(r[i].text),a.select(".tour-button").text(r[i].button)}(r[i])}),a.select(".tour-hide").on("click",function(t){c?(c=!1,a.classed("tour-hidden",!1)):(c=!0,a.classed("tour-hidden",!0))})}mapboxgl.accessToken="pk.eyJ1IjoiZG9jazQyNDIiLCJhIjoiY2pjazE5eTM2NDl2aDJ3cDUyeDlsb292NiJ9.Jr__XbmAolbLyzPDj7-8kQ",console.log(t),(e=new mapboxgl.Map({container:"main-map",style:"mapbox://styles/dock4242/cjnel8krq2ltq2spteciqe2x3?optimize=true",center:[t.lon,t.lat],zoom:8,pitch:60,bearing:0})).on("load",function(){s.classed("start-active",!0).select("p").text("Start").on("click",function(t){h(),u.transition().duration(500).style("opacity",0).on("end",function(t){d3.select(".top-header").transition().duration(500).delay(100).style("transform","translate(0px,0px)"),d3.select(".tour-container").transition().duration(0).delay(500).on("end",function(t){d3.select(this).classed("tour-hidden",!1).classed("tour-hidden-start",!1),c=!1}),u.remove()})})}),e.on("moveend",function(){}),function(){var t=d3.select(".top-toggles");t.selectAll("div").on("click",function(e){y(d3.select(this).attr("id")),t.selectAll("div").select("p").classed("top-toggle-active",!1),d3.select(this).select("p").classed("top-toggle-active",!0)})}()}var u={init:function(){c({lon:"-122.4374",lat:"37.7599"})},resize:function(){}},s=d3.select("body"),l=0;function f(){var t=s.node().offsetWidth;l!==t&&(l=t,u.resize())}s.classed("is-mobile",a.any()),window.addEventListener("resize",i()(f,150)),u.init()},2:function(t,e,n){(function(e){var n="Expected a function",o=NaN,i="[object Symbol]",r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,d=l||f||Function("return this")(),p=Object.prototype.toString,g=Math.max,b=Math.min,m=function(){return d.Date.now()};function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function h(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==i}(t))return o;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=c.test(t);return n||u.test(t)?s(t.slice(2),n?2:8):a.test(t)?o:+t}t.exports=function(t,e,o){var i,r,a,c,u,s,l=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function v(e){var n=i,o=r;return i=r=void 0,l=e,c=t.apply(o,n)}function x(t){var n=t-s;return void 0===s||n>=e||n<0||d&&t-l>=a}function j(){var t=m();if(x(t))return w(t);u=setTimeout(j,function(t){var n=e-(t-s);return d?b(n,a-(t-l)):n}(t))}function w(t){return u=void 0,p&&i?v(t):(i=r=void 0,c)}function z(){var t=m(),n=x(t);if(i=arguments,r=this,s=t,n){if(void 0===u)return function(t){return l=t,u=setTimeout(j,e),f?v(t):c}(s);if(d)return u=setTimeout(j,e),v(s)}return void 0===u&&(u=setTimeout(j,e)),c}return e=h(e)||0,y(o)&&(f=!!o.leading,a=(d="maxWait"in o)?g(h(o.maxWait)||0,e):a,p="trailing"in o?!!o.trailing:p),z.cancel=function(){void 0!==u&&clearTimeout(u),l=0,i=s=r=u=void 0},z.flush=function(){return void 0===u?c:w(m())},z}}).call(this,n(0))}});